<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>College Event Management</title>
<style>
  body {
    font-family: 'Segoe UI', sans-serif;
    margin: 0;
    color: #fff;
    overflow-x: hidden;
    background: url('background.jpg') no-repeat center center fixed;
    background-size: cover;
  }
  nav {
    background: rgba(0,0,0,0.7);
    padding: 15px 30px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: sticky;
    top: 0;
    z-index: 1000;
  }
  nav h1 { color: #ffd700; font-size: 1.5em; }
  nav ul { list-style: none; display: flex; gap: 20px; margin: 0; padding: 0; }
  nav ul li a { color: #fff; text-decoration: none; font-weight: 600; transition: 0.3s; cursor: pointer; }
  nav ul li a:hover { color: #ffd700; }
  section { display: none; padding: 40px; min-height: 100vh; }
  #home {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    text-align: center;
    margin: 0;
    padding: 120px 20px;
    background: rgba(0,0,0,0.6);
    border-radius: 20px;
    box-shadow: 0 8px 25px rgba(0,0,0,0.25);
  }
  #home h2 { font-size: 3em; margin-bottom: 20px; color: #ffd700; }
  #home button { padding: 15px 40px; border: none; border-radius: 30px; font-size: 1.1em; font-weight: bold; cursor: pointer;
                 background: rgba(255,255,255,0.2); color: #fff; backdrop-filter: blur(10px);
                 box-shadow: 0 6px 15px rgba(0,0,0,0.2); transition: 0.4s; }
  #home button:hover { background: #ffd700; color: #222; transform: translateY(-3px); }
  .back-btn { margin-top: 20px; padding: 10px 20px; background:#444; color:#fff; border:none; border-radius:10px; cursor:pointer; }
  .back-btn:hover { background:#ffd700; color:#000; }

  #event-cards { display: flex; flex-wrap: wrap; gap: 20px; margin-top: 20px; }
  .event-card {
    background: rgba(0,0,0,0.7);
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 6px 15px rgba(0,0,0,0.5);
    width: 250px;
    text-align: center;
    transition: 0.3s;
    color: #fff;
  }
  .event-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.7); }

  form {
    max-width: 500px;
    margin: auto;
    background: rgba(0,0,0,0.7);
    padding: 40px;
    border-radius: 20px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.5);
  }
  form input, form select, form button {
    width: 100%; padding: 15px; margin-bottom: 20px;
    border-radius: 12px; font-size: 1em;
  }
  form input, form select { border: 1px solid #ddd; transition: 0.3s; }
  form input:focus, form select:focus { border-color: #ffd700; outline: none; }
  form button {
    border: none; border-radius: 25px; font-weight: bold;
    cursor: pointer; background: linear-gradient(135deg, #ffd700, #ff9900);
    color: #000; transition: 0.3s; box-shadow: 0 6px 15px rgba(0,0,0,0.5);
  }
  form button:hover { transform: translateY(-3px); box-shadow: 0 10px 25px rgba(0,0,0,0.7); }

  .event-participants { max-width: 700px; margin: 40px auto; background: rgba(0,0,0,0.6); padding: 20px; border-radius: 12px; }
  .event-participants h3 { color: #ffd700; margin-bottom: 10px; }
  .event-participants table { width: 100%; border-collapse: collapse; margin-bottom: 30px; }
  .event-participants th, .event-participants td {
    border:1px solid #ccc; padding:10px; text-align:left; background: rgba(255,255,255,0.1);
  }
  .event-participants th { background:#ffd700; color:#000; }
  .no-participants { font-style: italic; color: #bbb; padding: 10px 0; }
  .delete-btn { background:#ff4d4d; color:#fff; padding:5px 10px; border:none; border-radius:8px; cursor:pointer; margin-left:10px; }
  .delete-btn:hover { background:#e60000; }
</style>
</head>
<body>

<!-- Home -->
<section id="home">
  <h2>Welcome to College Event Management 🎓</h2>
  <p>Organize, participate, and celebrate college events with style 🚀</p>
  <div style="display:flex; gap:20px; justify-content:center; flex-wrap:wrap;">
    <button onclick="userEntry()">User Entry</button>
    <button onclick="showLogin()">Admin Entry</button>
  </div>
</section>

<!-- Admin Setup -->
<section id="setup">
  <form onsubmit="setAdmin(event)">
    <h2>Set Admin Password</h2>
    <input type="text" id="setup-user" placeholder="Username" required>
    <input type="password" id="setup-pass" placeholder="Password" required>
    <button type="submit">Save</button>
  </form>
  <button class="back-btn" onclick="backHome()">⬅ Back</button>
</section>

<!-- Admin Login -->
<section id="login">
  <form onsubmit="adminLogin(event)">
    <h2>Admin Login</h2>
    <input type="text" id="admin-user" placeholder="Username" required>
    <input type="password" id="admin-pass" placeholder="Password" required>
    <button type="submit">Login</button>
  </form>
  <button class="back-btn" onclick="backHome()">⬅ Back</button>
</section>

<!-- Main App -->
<div id="main-app">
  <nav>
    <h1>🎉 College Events</h1>
    <ul>
      <li><a onclick="showPage('events')">Events</a></li>
      <li><a onclick="showPage('register')">Register</a></li>
      <li><a onclick="showPage('admin')">Admin</a></li>
      <li><a onclick="showPage('manage')">Manage Events</a></li>
      <li><a onclick="logout()">Logout</a></li>
    </ul>
  </nav>

  <!-- Events -->
  <section id="events">
    <h2>Upcoming Events</h2>
    <div id="event-cards"></div>
  </section>

  <!-- Register -->
  <section id="register">
    <form onsubmit="registerEvent(event)">
      <h2>Register for Event</h2>
      <input type="text" id="name" placeholder="Your Name" required>
      <input type="email" id="email" placeholder="Your Email" required>
      <select id="event" required></select>
      <input type="text" id="year" placeholder="Year (e.g., 2nd Year)" required>
      <input type="text" id="branch" placeholder="Branch (e.g., CSE)" required>
      <input type="text" id="section" placeholder="Section (e.g., A)" required>
      <button type="submit">Register</button>
    </form>
    <div id="participants-container"></div>
  </section>

  <!-- Admin Participants -->
  <section id="admin">
    <h2>Participants by Event</h2>
    <div id="admin-participants"></div>
  </section>

  <!-- Manage Events -->
  <section id="manage">
    <form onsubmit="addEvent(event)">
      <h2>Manage Events</h2>
      <input type="text" id="new-event" placeholder="New Event Name" required>
      <input type="file" id="new-event-image" accept="image/*">
      <button type="submit">Add Event</button>
    </form>
    <div id="manage-list"></div>
  </section>
</div>

<script>
let events = [
  {name: "Coding Hackathon", image: ""},
  {name: "Music Fest", image: ""},
  {name: "Tech Quiz", image: ""}
];
let participants = [];
let isAdmin = false;

// --- Navigation ---
function backHome(){
  document.querySelectorAll("section").forEach(sec => sec.style.display="none");
  document.getElementById("main-app").style.display="none";
  document.getElementById("home").style.display="block";
}

// --- User Entry ---
function userEntry(){
  document.getElementById("home").style.display = "none";
  document.getElementById("main-app").style.display = "block";
  isAdmin = false;
  loadEvents();
  loadEventOptions();
  displayParticipantsByEvent();
  showPage("events");
}

// --- Admin Setup/Login ---
function showLogin(){
  document.getElementById("home").style.display = "none";
  if(localStorage.getItem("adminUser") && localStorage.getItem("adminPass")){
    document.getElementById("login").style.display = "block";
  } else {
    document.getElementById("setup").style.display = "block";
  }
}
function setAdmin(e){
  e.preventDefault();
  const user = document.getElementById("setup-user").value;
  const pass = document.getElementById("setup-pass").value;
  localStorage.setItem("adminUser", user);
  localStorage.setItem("adminPass", pass);
  alert("✅ Admin credentials saved!");
  document.getElementById("setup").style.display="none";
  document.getElementById("login").style.display="block";
}
function adminLogin(e){
  e.preventDefault();
  const user = document.getElementById("admin-user").value;
  const pass = document.getElementById("admin-pass").value;
  if(user === localStorage.getItem("adminUser") && pass === localStorage.getItem("adminPass")){
    isAdmin = true;
    alert("✅ Admin logged in!");
    document.getElementById("login").style.display = "none";
    document.getElementById("main-app").style.display = "block";
    loadEvents();
    loadEventOptions();
    displayParticipantsByEvent();
    showPage("events");
  } else {
    alert("❌ Wrong username or password!");
  }
}
function logout(){
  isAdmin=false;
  backHome();
}

// --- Page Navigation ---
function showPage(pageId){
  if((pageId==="admin" || pageId==="manage") && !isAdmin){ alert("⚠️ Only admin can access!"); return; }
  document.querySelectorAll("#main-app section").forEach(sec => sec.style.display="none");
  document.getElementById(pageId).style.display="block";
  if(pageId==="events") loadEvents();
  if(pageId==="register"){ loadEventOptions(); displayParticipantsByEvent(); }
  if(pageId==="admin") loadParticipantsAdmin();
  if(pageId==="manage") displayManageEvents();
}

// --- Events ---
function loadEvents(){
  const container = document.getElementById("event-cards");
  container.innerHTML="";
  events.forEach(ev=>{
    const img = ev.image||"https://via.placeholder.com/250";
    container.innerHTML += `<div class="event-card" style="background-image:url('${img}'); background-size:cover; background-position:center;">
      <h3>${ev.name}</h3><p>Join us for ${ev.name}!</p></div>`;
  });
}
function loadEventOptions(){
  const select=document.getElementById("event");
  select.innerHTML="";
  events.forEach(ev=> select.innerHTML += `<option value="${ev.name}">${ev.name}</option>`);
}

// --- Registration ---
function registerEvent(e){
  e.preventDefault();
  const name=document.getElementById("name").value;
  const email=document.getElementById("email").value;
  const event=document.getElementById("event").value;
  const year=document.getElementById("year").value;
  const branch=document.getElementById("branch").value;
  const section=document.getElementById("section").value;
  participants.push({name,email,event,year,branch,section});
  alert("🎉 Registered successfully!");
  e.target.reset();
  displayParticipantsByEvent();
}
function displayParticipantsByEvent(){
  const container=document.getElementById("participants-container");
  container.innerHTML="";
  events.forEach(ev=>{
    const eventParticipants=participants.filter(p=>p.event===ev.name);
    let html=`<div class="event-participants"><h3>${ev.name}</h3>`;
    if(eventParticipants.length===0) html+=`<p class="no-participants">No participants registered yet.</p>`;
    else{
      html+=`<table><thead><tr><th>Name</th><th>Email</th><th>Year</th><th>Branch</th><th>Section</th></tr></thead><tbody>`;
      eventParticipants.forEach(p=> html+=`<tr><td>${p.name}</td><td>${p.email}</td><td>${p.year}</td><td>${p.branch}</td><td>${p.section}</td></tr>`);
      html+=`</tbody></table>`;
    }
    html+=`</div>`;
    container.innerHTML+=html;
  });
}

// --- Admin Participants ---
function loadParticipantsAdmin(){
  const container=document.getElementById("admin-participants");
  container.innerHTML="";
  events.forEach(ev=>{
    const eventParticipants=participants.filter(p=>p.event===ev.name);
    let html=`<div class="event-participants"><h3>${ev.name}</h3>`;
    if(eventParticipants.length===0) html+=`<p class="no-participants">No participants registered yet.</p>`;
    else{
      html+=`<table><thead><tr><th>Name</th><th>Email</th><th>Year</th><th>Branch</th><th>Section</th></tr></thead><tbody>`;
      eventParticipants.forEach(p=> html+=`<tr><td>${p.name}</td><td>${p.email}</td><td>${p.year}</td><td>${p.branch}</td><td>${p.section}</td></tr>`);
      html+=`</tbody></table>`;
    }
    html+=`</div>`;
    container.innerHTML+=html;
  });
}

// --- Manage Events ---
function addEvent(e){
  e.preventDefault();
  const newEventName=document.getElementById("new-event").value.trim();
  const fileInput=document.getElementById("new-event-image");
  const file=fileInput.files[0];
  if(newEventName && !events.some(ev=>ev.name===newEventName)){
    if(file){
      const reader=new FileReader();
      reader.onload=function(e){
        events.push({name:newEventName,image:e.target.result});
        displayManageEvents();
        loadEvents();
        loadEventOptions();
        alert("✅ Event added with image!");
      };
      reader.readAsDataURL(file);
    } else {
      events.push({name:newEventName,image:""});
      displayManageEvents();
      loadEvents();
      loadEventOptions();
      alert("✅ Event added!");
    }
    document.getElementById("new-event").value="";
    fileInput.value="";
  } else alert("⚠️ Empty or duplicate event!");
}
function deleteEvent(name){
  if(confirm(`Delete "${name}" and all registrations?`)){
    events=events.filter(ev=>ev.name!==name);
    participants=participants.filter(p=>p.event!==name);
    displayManageEvents();
    loadEvents();
    displayParticipantsByEvent();
    loadParticipantsAdmin();
    loadEventOptions();
  }
}
function displayManageEvents(){
  const container=document.getElementById("manage-list");
  container.innerHTML="<h3>All Events:</h3><ul>";
  events.forEach(ev=> container.innerHTML+=`<li>${ev.name} <button class="delete-btn" onclick="deleteEvent('${ev.name}')">Delete</button></li>`);
  container.innerHTML+="</ul>";
}
</script>
</body>
</html>
